<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>3&nbsp; Corpus : techniques avancées – Introduction aux méthodes de traitement du langage naturel</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./q04_explorer.html" rel="next">
<link href="./q02_corpus.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">

<script src="site_libs/tabwid-1.1.3/tabwid.js"></script>



</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./q03_corpus_suite.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Corpus : techniques avancées</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction aux méthodes de traitement du langage naturel</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Préambule</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q01_introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q02_corpus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">La notion de corpus</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q03_corpus_suite.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Corpus : techniques avancées</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q04_explorer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Explorer le corpus</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q05_manipuler_caractere.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Manipuler les chaines de caractères</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q06_Analyse_quantitative.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Analyse quantitative du corpus</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q07_tokenisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Jouer avec les jetons</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q08_Analyse_syntaxic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Annotations syntaxiques</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q09_token_to_dfm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Des tokens à leurs co-occurences.</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q10_Analyse_Cooccurences.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Analyse des co-occurrences</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q11_Sentimentetdict.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Compter les mots pour annoter</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q12_Topic_Model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Modèles de Topic</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q13_Firstembeddings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Embeddings</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q14_Transformers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Transformers</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q15_Classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Classification with embeddings</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q16_LLM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Introduction aux LLMs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q17_NER.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Reconnaissance des entités nommées (NER)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q18_ZeroShotClassification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Zero shot Classification</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./q19_VLLM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Utilisation de l’IA generative</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glossaire.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ZGlossaire</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#la-gestion-des-documents-numériques" id="toc-la-gestion-des-documents-numériques" class="nav-link active" data-scroll-target="#la-gestion-des-documents-numériques"><span class="header-section-number">3.1</span> La gestion des documents numériques</a>
  <ul class="collapse">
  <li><a href="#extraire-du-texte-des-pdf" id="toc-extraire-du-texte-des-pdf" class="nav-link" data-scroll-target="#extraire-du-texte-des-pdf"><span class="header-section-number">3.1.1</span> Extraire du texte des pdf</a></li>
  <li><a href="#la-numérisation-et-locr" id="toc-la-numérisation-et-locr" class="nav-link" data-scroll-target="#la-numérisation-et-locr"><span class="header-section-number">3.1.2</span> La numérisation et l’OCR</a></li>
  <li><a href="#du-speech-au-texte" id="toc-du-speech-au-texte" class="nav-link" data-scroll-target="#du-speech-au-texte"><span class="header-section-number">3.1.3</span> Du speech au texte</a></li>
  </ul></li>
  <li><a href="#lexploitation-de-base-de-données-textuelles" id="toc-lexploitation-de-base-de-données-textuelles" class="nav-link" data-scroll-target="#lexploitation-de-base-de-données-textuelles"><span class="header-section-number">3.2</span> L’exploitation de base de données textuelles</a>
  <ul class="collapse">
  <li><a href="#le-cas-europresse" id="toc-le-cas-europresse" class="nav-link" data-scroll-target="#le-cas-europresse"><span class="header-section-number">3.2.1</span> le cas Europresse</a></li>
  <li><a href="#jouer-avec-les-bases-bibliographiques" id="toc-jouer-avec-les-bases-bibliographiques" class="nav-link" data-scroll-target="#jouer-avec-les-bases-bibliographiques"><span class="header-section-number">3.2.2</span> Jouer avec les bases bibliographiques</a></li>
  </ul></li>
  <li><a href="#lire-le-web-scrapping" id="toc-lire-le-web-scrapping" class="nav-link" data-scroll-target="#lire-le-web-scrapping"><span class="header-section-number">3.3</span> Lire le web : Scrapping</a>
  <ul class="collapse">
  <li><a href="#des-problèmes-pratiques-juridiques-et-éthiques" id="toc-des-problèmes-pratiques-juridiques-et-éthiques" class="nav-link" data-scroll-target="#des-problèmes-pratiques-juridiques-et-éthiques"><span class="header-section-number">3.3.1</span> Des problèmes pratiques, juridiques et éthiques</a></li>
  </ul></li>
  <li><a href="#limportance-croissante-des-api" id="toc-limportance-croissante-des-api" class="nav-link" data-scroll-target="#limportance-croissante-des-api"><span class="header-section-number">3.4</span> L’importance croissante des API</a>
  <ul class="collapse">
  <li><a href="#un-tour-dhorizon" id="toc-un-tour-dhorizon" class="nav-link" data-scroll-target="#un-tour-dhorizon"><span class="header-section-number">3.4.1</span> Un tour d’horizon</a></li>
  <li><a href="#un-point-de-vue-plus-technique" id="toc-un-point-de-vue-plus-technique" class="nav-link" data-scroll-target="#un-point-de-vue-plus-technique"><span class="header-section-number">3.4.2</span> un point de vue plus technique</a></li>
  <li><a href="#un-exemple-avec-rtweet" id="toc-un-exemple-avec-rtweet" class="nav-link" data-scroll-target="#un-exemple-avec-rtweet"><span class="header-section-number">3.4.3</span> Un exemple avec Rtweet</a></li>
  <li><a href="#un-autre-exemple" id="toc-un-autre-exemple" class="nav-link" data-scroll-target="#un-autre-exemple"><span class="header-section-number">3.4.4</span> Un autre exemple</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">3.5</span> Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Corpus : techniques avancées</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#les librairies du chapître</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_minimal</span>()) </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">set_flextable_defaults</span>(</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">font.size =</span> <span class="dv">10</span>, <span class="at">theme_fun =</span> theme_vanilla,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">padding =</span> <span class="dv">6</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">background.color =</span> <span class="st">"#EFEFEF"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Objectifs du chapitre :</strong></p>
<ul>
<li><div>
<ul>
<li>Explorer différentes techniques de collectes de données : exploitation de bases textuelles, méthodes de scrapping, APIs, extraction de document pdf, extraction de textes dans des images, et une perspective oral avec les techniques de speech2tex.</li>
</ul>
</div></li>
</ul>
<p>La constitution d’un corpus est la première étape d’un projet NLP. Il se définit d’abord par la constitution d’une collection de textes dont la provenance est la nature peut être diverse.</p>
<p>Dans ce chapitre on va examiner plusieurs techniques de collecte, puis conclure avec quelques réflexions sur la question de la constitution de l’échantillon.</p>
<ul>
<li>L’exploitation de bases textuelles</li>
<li>Les méthodes de scrapping</li>
<li>Le recours aux APIs</li>
<li>La collection de documents pas uniquement textuelle</li>
<li>Les sources orales</li>
</ul>
<section id="la-gestion-des-documents-numériques" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="la-gestion-des-documents-numériques"><span class="header-section-number">3.1</span> La gestion des documents numériques</h2>
<p>Dans certains cas le matériau se présentera sous forme de documents numériques tels qu’un pdf, ou même de simples images.</p>
<p>voir aussi</p>
<p><a href="https://cran.r-project.org/web/packages/fulltext/fulltext.pdf" class="uri">https://cran.r-project.org/web/packages/fulltext/fulltext.pdf</a></p>
<section id="extraire-du-texte-des-pdf" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="extraire-du-texte-des-pdf"><span class="header-section-number">3.1.1</span> Extraire du texte des pdf</h3>
<p>Le package <a href="https://ropensci.org/blog/2016/03/01/pdftools-and-jeroen/">pdftools</a> est parfaitement adapté à la tâche. Des fonctions simples extraient différents éléments du pdf :</p>
<ul>
<li><p>Les information relatives au document pdf lui-même</p></li>
<li><p>La liste des polices employées</p></li>
<li><p>Les attachements</p></li>
<li><p>La table des matières (si elle a été encodée)</p></li>
<li><p>Les chaînes de caractères constituant le texte dans un ordre de droite à gauche et ligne à ligne, reconnaissant cependant les retours chariot, et autres sauts de lignes séparant les paragraphes</p></li>
</ul>
<p>Chaque page est contenue dans une ligne.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>info <span class="ot">&lt;-</span> <span class="fu">pdf_info</span>(<span class="st">"./data/2021neoliberalismegouverner_Meunier_Esprit.pdf"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>info</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$version
[1] "1.4"

$pages
[1] 12

$encrypted
[1] FALSE

$linearized
[1] TRUE

$keys
$keys$Author
[1] ""

$keys$Creator
[1] ""

$keys$Keywords
[1] ""

$keys$Producer
[1] "TCPDF 6.2.12 (http://www.tcpdf.org)"

$keys$Subject
[1] ""

$keys$Title
[1] "Le néolibéralisme et l\u0090art de gouverner"

$keys$Trapped
[1] ""


$created
[1] "2021-05-04 17:33:26 CEST"

$modified
[1] "2021-07-02 14:10:59 CEST"

$metadata
[1] "&lt;?xpacket begin=\"ï»¿\" id=\"W5M0MpCehiHzreSzNTczkc9d\"?&gt;\n&lt;x:xmpmeta xmlns:x=\"adobe:ns:meta/\" x:xmptk=\"Adobe XMP Core 5.6-c017 91.164464, 2020/06/15-10:20:05        \"&gt;\n   &lt;rdf:RDF xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"&gt;\n      &lt;rdf:Description rdf:about=\"\"\n            xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n            xmlns:xmp=\"http://ns.adobe.com/xap/1.0/\"\n            xmlns:pdf=\"http://ns.adobe.com/pdf/1.3/\"\n            xmlns:xmpMM=\"http://ns.adobe.com/xap/1.0/mm/\"\n            xmlns:pdfaExtension=\"http://www.aiim.org/pdfa/ns/extension/\"\n            xmlns:pdfaSchema=\"http://www.aiim.org/pdfa/ns/schema#\"\n            xmlns:pdfaProperty=\"http://www.aiim.org/pdfa/ns/property#\"&gt;\n         &lt;dc:format&gt;application/pdf&lt;/dc:format&gt;\n         &lt;dc:title&gt;\n            &lt;rdf:Alt&gt;\n               &lt;rdf:li xml:lang=\"x-default\"&gt;Le nÃ©olibÃ©ralisme et lâ\u0080\u0099art de gouverner&lt;/rdf:li&gt;\n            &lt;/rdf:Alt&gt;\n         &lt;/dc:title&gt;\n         &lt;dc:creator&gt;\n            &lt;rdf:Seq&gt;\n               &lt;rdf:li/&gt;\n            &lt;/rdf:Seq&gt;\n         &lt;/dc:creator&gt;\n         &lt;dc:description&gt;\n            &lt;rdf:Alt&gt;\n               &lt;rdf:li xml:lang=\"x-default\"/&gt;\n            &lt;/rdf:Alt&gt;\n         &lt;/dc:description&gt;\n         &lt;dc:subject&gt;\n            &lt;rdf:Bag&gt;\n               &lt;rdf:li/&gt;\n            &lt;/rdf:Bag&gt;\n         &lt;/dc:subject&gt;\n         &lt;xmp:CreateDate&gt;2021-05-04T17:33:26+02:00&lt;/xmp:CreateDate&gt;\n         &lt;xmp:CreatorTool/&gt;\n         &lt;xmp:ModifyDate&gt;2021-07-02T14:10:59+02:00&lt;/xmp:ModifyDate&gt;\n         &lt;xmp:MetadataDate&gt;2021-07-02T14:10:59+02:00&lt;/xmp:MetadataDate&gt;\n         &lt;pdf:Keywords/&gt;\n         &lt;pdf:Producer&gt;TCPDF 6.2.12 (http://www.tcpdf.org)&lt;/pdf:Producer&gt;\n         &lt;xmpMM:DocumentID&gt;uuid:95265141-0cc7-e3b8-5dff-27561dd19960&lt;/xmpMM:DocumentID&gt;\n         &lt;xmpMM:InstanceID&gt;uuid:71358868-c7aa-4ef5-8b30-f18fa6312a88&lt;/xmpMM:InstanceID&gt;\n         &lt;pdfaExtension:schemas&gt;\n            &lt;rdf:Bag&gt;\n               &lt;rdf:li rdf:parseType=\"Resource\"&gt;\n                  &lt;pdfaSchema:namespaceURI&gt;http://ns.adobe.com/pdf/1.3/&lt;/pdfaSchema:namespaceURI&gt;\n                  &lt;pdfaSchema:prefix&gt;pdf&lt;/pdfaSchema:prefix&gt;\n                  &lt;pdfaSchema:schema&gt;Adobe PDF Schema&lt;/pdfaSchema:schema&gt;\n               &lt;/rdf:li&gt;\n               &lt;rdf:li rdf:parseType=\"Resource\"&gt;\n                  &lt;pdfaSchema:namespaceURI&gt;http://ns.adobe.com/xap/1.0/mm/&lt;/pdfaSchema:namespaceURI&gt;\n                  &lt;pdfaSchema:prefix&gt;xmpMM&lt;/pdfaSchema:prefix&gt;\n                  &lt;pdfaSchema:schema&gt;XMP Media Management Schema&lt;/pdfaSchema:schema&gt;\n                  &lt;pdfaSchema:property&gt;\n                     &lt;rdf:Seq&gt;\n                        &lt;rdf:li rdf:parseType=\"Resource\"&gt;\n                           &lt;pdfaProperty:category&gt;internal&lt;/pdfaProperty:category&gt;\n                           &lt;pdfaProperty:description&gt;UUID based identifier for specific incarnation of a document&lt;/pdfaProperty:description&gt;\n                           &lt;pdfaProperty:name&gt;InstanceID&lt;/pdfaProperty:name&gt;\n                           &lt;pdfaProperty:valueType&gt;URI&lt;/pdfaProperty:valueType&gt;\n                        &lt;/rdf:li&gt;\n                     &lt;/rdf:Seq&gt;\n                  &lt;/pdfaSchema:property&gt;\n               &lt;/rdf:li&gt;\n               &lt;rdf:li rdf:parseType=\"Resource\"&gt;\n                  &lt;pdfaSchema:namespaceURI&gt;http://www.aiim.org/pdfa/ns/id/&lt;/pdfaSchema:namespaceURI&gt;\n                  &lt;pdfaSchema:prefix&gt;pdfaid&lt;/pdfaSchema:prefix&gt;\n                  &lt;pdfaSchema:schema&gt;PDF/A ID Schema&lt;/pdfaSchema:schema&gt;\n                  &lt;pdfaSchema:property&gt;\n                     &lt;rdf:Seq&gt;\n                        &lt;rdf:li rdf:parseType=\"Resource\"&gt;\n                           &lt;pdfaProperty:category&gt;internal&lt;/pdfaProperty:category&gt;\n                           &lt;pdfaProperty:description&gt;Part of PDF/A standard&lt;/pdfaProperty:description&gt;\n                           &lt;pdfaProperty:name&gt;part&lt;/pdfaProperty:name&gt;\n                           &lt;pdfaProperty:valueType&gt;Integer&lt;/pdfaProperty:valueType&gt;\n                        &lt;/rdf:li&gt;\n                        &lt;rdf:li rdf:parseType=\"Resource\"&gt;\n                           &lt;pdfaProperty:category&gt;internal&lt;/pdfaProperty:category&gt;\n                           &lt;pdfaProperty:description&gt;Amendment of PDF/A standard&lt;/pdfaProperty:description&gt;\n                           &lt;pdfaProperty:name&gt;amd&lt;/pdfaProperty:name&gt;\n                           &lt;pdfaProperty:valueType&gt;Text&lt;/pdfaProperty:valueType&gt;\n                        &lt;/rdf:li&gt;\n                        &lt;rdf:li rdf:parseType=\"Resource\"&gt;\n                           &lt;pdfaProperty:category&gt;internal&lt;/pdfaProperty:category&gt;\n                           &lt;pdfaProperty:description&gt;Conformance level of PDF/A standard&lt;/pdfaProperty:description&gt;\n                           &lt;pdfaProperty:name&gt;conformance&lt;/pdfaProperty:name&gt;\n                           &lt;pdfaProperty:valueType&gt;Text&lt;/pdfaProperty:valueType&gt;\n                        &lt;/rdf:li&gt;\n                     &lt;/rdf:Seq&gt;\n                  &lt;/pdfaSchema:property&gt;\n               &lt;/rdf:li&gt;\n            &lt;/rdf:Bag&gt;\n         &lt;/pdfaExtension:schemas&gt;\n      &lt;/rdf:Description&gt;\n   &lt;/rdf:RDF&gt;\n&lt;/x:xmpmeta&gt;\n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                           \n&lt;?xpacket end=\"w\"?&gt;"

$locked
[1] FALSE

$attachments
[1] FALSE

$layout
[1] "single_page"</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>fonts <span class="ot">&lt;-</span> <span class="fu">pdf_fonts</span>(<span class="st">"./data/2021neoliberalismegouverner_Meunier_Esprit.pdf"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">pdf_attachments</span>(<span class="st">"./data/2021neoliberalismegouverner_Meunier_Esprit.pdf"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>toc <span class="ot">&lt;-</span> <span class="fu">pdf_toc</span>(<span class="st">"./data/2021neoliberalismegouverner_Meunier_Esprit.pdf"</span>) <span class="co">#il n'y a pas de table des matière dans ce texte</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">pdf_text</span>(<span class="st">"./data/2021neoliberalismegouverner_Meunier_Esprit.pdf"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(text[[<span class="dv">1</span>]]) <span class="co"># pour afficher le texte de la page 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Le néolibéralisme
et l’art de gouverner
À propos de Naissance de la biopolitique
de Michel Foucault
François Meunier




O          n dit parfois du métier de l’historien qu’il consiste avant tout
           à découper en périodes, à indiquer les ruptures dans le temps
           historique, à montrer les changements d’environnement et
de paradigme. C’est à ce travail que se consacre Michel Foucault dans
son célèbre cours de 1978‑1979 au Collège de France connu sous le
nom de Naissance de la biopolitique 1. Il devait porter initialement sur la
« biopolitique », un mot chatoyant recouvrant les pratiques politiques
contemporaines autour du vivant (santé, démographie, sexualité, etc.).
Mais Foucault voulait montrer d’abord à quel point la venue du libé‑
ralisme avait modifié en profondeur les pratiques gouvernementales.
Première rupture, celle advenue à la fin du xviiie siècle avec le libéralisme
économique classique, selon lequel le marché devient l’instance clé dans
l’art de gouverner, donnant à l’action publique un lieu de légitimation en
même temps que des limites. Seconde rupture, celle qui sépare libéralisme
et néolibéralisme, que Foucault situe dans l’après‑guerre en Allemagne,
avec ce qu’on appelle « l’ordolibéralisme ».


Équivocité du néolibéralisme
Reprenant, quelque quarante ans après, le fil de ce cours, nous remettons
ici en cause le découpage historique. D’abord, il nous semble que ce

1 - Michel Foucault, Naissance de la biopolitique. Cours au Collège de France (1978-1979), Paris,
EHESS/Seuil/Gallimard, 2004.




· ESPRIT · Mai 2021                                                                                 83/</code></pre>
</div>
</div>
<p>Il va falloir traiter ce texte en analysant précisément sa composition. Pour ce faire, il s’agîra de définir une séquence d’opérations logiques qui permette un premier nettoyage du texte. Dans l’exemple nous allons de plus essayer de conserver la structure des paragraphes du texte.</p>
<ul>
<li>Suprimer haut et bas de pages</li>
<li>Supprimer les sauts de ligne</li>
<li>Identifier les sauts de paragraphes</li>
<li>Enlever les notes de bas de page</li>
<li>Corriger l’hyphénation ()</li>
<li>regrouper les document en un seul bloc de texte</li>
<li>le splitter en autant de paragraphes.</li>
</ul>
<p>On va utiliser des fonctions de traitement de chaines de caractère avec Stringret le recours à l’art ( ici simple) des regex auxquels on consacre un développement dans le chapitres X.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>tex<span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(text)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>tex[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Le néolibéralisme\net l’art de gouverner\nÀ propos de Naissance de la biopolitique\nde Michel Foucault\nFrançois Meunier\n\n\n\n\nO          n dit parfois du métier de l’historien qu’il consiste avant tout\n           à découper en périodes, à indiquer les ruptures dans le temps\n           historique, à montrer les changements d’environnement et\nde paradigme. C’est à ce travail que se consacre Michel Foucault dans\nson célèbre cours de 1978‑1979 au Collège de France connu sous le\nnom de Naissance de la biopolitique 1. Il devait porter initialement sur la\n« biopolitique », un mot chatoyant recouvrant les pratiques politiques\ncontemporaines autour du vivant (santé, démographie, sexualité, etc.).\nMais Foucault voulait montrer d’abord à quel point la venue du libé‑\nralisme avait modifié en profondeur les pratiques gouvernementales.\nPremière rupture, celle advenue à la fin du xviiie siècle avec le libéralisme\néconomique classique, selon lequel le marché devient l’instance clé dans\nl’art de gouverner, donnant à l’action publique un lieu de légitimation en\nmême temps que des limites. Seconde rupture, celle qui sépare libéralisme\net néolibéralisme, que Foucault situe dans l’après‑guerre en Allemagne,\navec ce qu’on appelle « l’ordolibéralisme ».\n\n\nÉquivocité du néolibéralisme\nReprenant, quelque quarante ans après, le fil de ce cours, nous remettons\nici en cause le découpage historique. D’abord, il nous semble que ce\n\n1 - Michel Foucault, Naissance de la biopolitique. Cours au Collège de France (1978-1979), Paris,\nEHESS/Seuil/Gallimard, 2004.\n\n\n\n\n· ESPRIT · Mai 2021                                                                                 83/\n"</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>t_reg<span class="ot">&lt;-</span><span class="fu">str_replace</span>(tex<span class="sc">$</span>text,<span class="st">"[</span><span class="sc">\\</span><span class="st">s+].*Meunier[</span><span class="sc">\n</span><span class="st">]+"</span>, <span class="st">" "</span>) <span class="co"># entete droite</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="do">## on selectionne tout bloc de texte qui commence par un nombre indéterminée de blanc qui s'achève par n'importe quel caractère répétés mais terimé par la séquence Meunier suivie de sauts de ligne.</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>t_reg<span class="ot">&lt;-</span><span class="fu">str_replace</span>(t_reg,<span class="st">"[</span><span class="sc">\\</span><span class="st">s+].*gouverner[</span><span class="sc">\n</span><span class="st">]+"</span>, <span class="st">" "</span>) <span class="co"># entete gauche</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>t_reg<span class="ot">&lt;-</span><span class="fu">str_replace_all</span>(t_reg,<span class="st">"[</span><span class="sc">\\</span><span class="st">s+].*2021[</span><span class="sc">\n</span><span class="st">]"</span>, <span class="st">" "</span>) <span class="co"># bas de page  gauche</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>t_reg<span class="ot">&lt;-</span><span class="fu">str_replace_all</span>(t_reg,<span class="st">"ESPRIT.*[</span><span class="sc">\n</span><span class="st">]"</span>, <span class="st">" "</span>) <span class="co"># bas de page droit</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#on marque les paragraphes avec la chaine XXX pour les splitter dans un second temps</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>t_reg<span class="ot">&lt;-</span><span class="fu">str_replace_all</span>(t_reg,<span class="st">"</span><span class="sc">\n\n\n</span><span class="st">"</span>, <span class="st">"XXX"</span>) </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co"># On supprime les saut de ligne en les remplaçant par un espace</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>t_reg<span class="ot">&lt;-</span><span class="fu">str_replace_all</span>(t_reg,<span class="st">"[</span><span class="sc">\n</span><span class="st">]"</span>, <span class="st">" "</span>)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">#on enlève les notes de bas de page</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>t_reg<span class="ot">&lt;-</span><span class="fu">str_replace_all</span>(t_reg,<span class="st">"</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">s[</span><span class="sc">\\</span><span class="st">-].*XXX"</span>, <span class="st">"XXX"</span>)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co">#on regroupe les pages</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>t<span class="ot">&lt;-</span><span class="fu">paste</span>(<span class="fu">unlist</span>(<span class="fu">t</span>(t_reg)), <span class="at">collapse=</span><span class="st">" "</span>)</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="co">#on enlève les notes dans le texte</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>t<span class="ot">&lt;-</span><span class="fu">str_replace_all</span>(t,<span class="st">"[A-Z|a-z]+</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">s[</span><span class="sc">\\</span><span class="st">-]"</span>, <span class="st">" "</span>)</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>t<span class="ot">&lt;-</span><span class="fu">str_replace_all</span>(t,<span class="st">"</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">s[</span><span class="sc">\\</span><span class="st">-]"</span>, <span class="st">" "</span>)</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="co">#hyphenation</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>t<span class="ot">&lt;-</span><span class="fu">str_replace_all</span>(t,<span class="st">"[A-Z|a-z]+[</span><span class="sc">\\</span><span class="st">-]</span><span class="sc">\\</span><span class="st">s"</span>, <span class="st">""</span>)</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="co">#pour enlever les espaces excedentaires</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>t<span class="ot">&lt;-</span><span class="fu">str_squish</span>(t)</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>t</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Le néolibéralisme À propos de Naissance de la biopolitique de Michel Foucault O n dit parfois du métier de l’historien qu’il consiste avant tout à découper en périodes, à indiquer les ruptures dans le temps historique, à montrer les changements d’environnement et de paradigme. C’est à ce travail que se consacre Michel Foucault dans son célèbre cours de 1978‑1979 au Collège de France connu sous le nom de Naissance de la biopolitique 1. Il devait porter initialement sur la « biopolitique », un mot chatoyant recouvrant les pratiques politiques contemporaines autour du vivant (santé, démographie, sexualité, etc.). Mais Foucault voulait montrer d’abord à quel point la venue du libé‑ ralisme avait modifié en profondeur les pratiques gouvernementales. Première rupture, celle advenue à la fin du xviiie siècle avec le libéralisme économique classique, selon lequel le marché devient l’instance clé dans l’art de gouverner, donnant à l’action publique un lieu de légitimation en même temps que des limites. Seconde rupture, celle qui sépare libéralisme et néolibéralisme, que Foucault situe dans l’après‑guerre en Allemagne, avec ce qu’on appelle « l’ordolibéralisme ».XXXÉquivocité du néolibéralisme Reprenant, quelque quarante ans après, le fil de ce cours, nous remettons ici en cause le découpage historique. D’abord, il nous semble que ce XXX · n’est pas autour de la notion de marché qu’il faut attacher la genèse du libéralisme classique, mais plutôt autour de l’idée d’une société capable de s’organiser en dehors du prince. Ensuite, la rupture constituante du néolibéralisme se situe postérieurement à l’arrivée de Reagan et Thatcher au pouvoir, lorsqu’on aura théorisé et mis en pratique la financiarisation de l’économie comme instance ordonnatrice (cela donc après le cours de Foucault). S’agissant de l’ordolibéralisme, il présente de fortes continuités avec le libéralisme classique, même s’il garde les marques d’un mer‑ cantilisme qui s’est développé tardivement en Allemagne. Il n’est guère étonnant que ce courant se soit fondu si aisément dans le modèle social de marché auquel on associe davantage la social‑démocratie allemande que le libéralisme débridé. Cela devrait aider à mieux caractériser ce qu’il faut entendre par « néo‑ libéralisme », un mot devenu équivoque. Si l’on peut créditer Foucault d’être parmi ceux qui l’ont inventé, c’est plus chez lui par commodité verbale2. Lorsqu’il rédigea le résumé du cours au terme de son année, c’est significativement le seul mot de « libéralisme » qu’il a retenu. Le cours bénéficie toujours d’une forte aura. En effet, il est la seule incursion de Foucault dans l’histoire contemporaine ; il introduit le concept de gouvernementalité, qui a acquis une certaine place dans la science politique. Son style attire, mélange d’écrit et d’oral où la pensée se construit par bonds successifs et inattendus, avançant « en écrevisse » comme il le dit. Le texte déroute aussi parce qu’il ne cherche pas à construire un contre‑modèle quand il analyse le courant intellectuel libéral. La dissection des textes s’accompagne à l’évidence chez lui d’une certaine fascination. Il rabroue même son public quand celui‑ci voudrait le voir glisser vers des objections trop faciles au libéralisme3. Il n’est pas étonnant que des milieux se réclamant du libéralisme, y compris poli‑ tique, s’en réclament presque autant que ses adversaires.XXX XXX Enfin et surtout, le texte se concentre pour l’essentiel sur l’Allemagne, un pays que Foucault connaissait très bien pour y avoir enseigné : « Dans cette seconde moitié du xxe siècle, le libéralisme est un mot qui nous vient d’Allemagne. » C’est l’ordolibéralisme qu’il désigne comme « néolibéral ». Il traite assez peu, de façon surprenante, de ce qu’on appelle l’École de Chicago, que Foucault appelle l’anarcho‑libéralisme, née dans les années 1930, dont l’influence a été majeure dans le renversement idéologique opéré à l’époque de Reagan aux États‑Unis : « Je ne suis pas sûr d’avoir le temps de parler des Américains. »XXXL’âge classique L’économie politique, à partir de Turgot et Smith, s’est bâtie sur une critique du régime mercantiliste. Le mercantilisme, c’est l’idéologie d’un État en constitution, qui organise l’hégémonie du prince, qui pour cela capte des richesses, s’organise administrativement, privilégie la bonne collecte des impôts et l’exportation, et où un ordre juridique se substitue au droit divin du souverain. Cette critique avait commencé sur le plan des idées politiques. Chez Locke et Spinoza, le citoyen naissait et la liberté politique était réclamée. Mais on ne touchait pas encore à l’organisation sociale du royaume. Le pas en avant fait par l’économie politique a été de donner toute sa place à la nouvelle classe des marchands, consciente désormais de contribuer à l’enrichissement du royaume. On quittait une vision assez prédatrice, où l’échange était essentiellement un jeu à somme nulle, où ce que gagnait un pays était une perte pour l’autre et où le talent du prince consistait à ce que son pays se sorte bien de cette confrontation. La vision classique est inverse : il y a possibilité d’un échange équitable, qui se fait fina‑ lement au bénéfice – « à l’intérêt » – des deux parties4. Il y a possibilité d’une croissance endogène où le marchand réinvestit son profit dans des activités nouvelles, une morale que le puritain anglais avait parfaitement intériorisée. Il s’introduit à plein la notion de concurrence qui gomme les situations de rente. Naissait dans la foulée la notion d’intérêt général et de bien commun, davantage au centre des intérêts individuels dans la XXX · tradition britannique que l’expression d’une souveraineté première dans la tradition française. Foucault décrit cette transition mais force le trait quand il indique, dans une phrase significative, que cet âge classique est celui où le marché devient un principe de régulation politique en remplacement de l’ordre juridique qui prévalait auparavant. Selon lui, c’est désormais la légi‑ timité marchande qui non seulement limite mais organise et structure la décision publique. Elle devient le « lieu de véridiction » de l’action gou‑ vernementale : « Ce lieu de formation de la vérité […], il faut le laisser jouer avec le moins d’interventions possibles pour qu’il puisse et formuler sa vérité et la proposer comme règle et norme à la pratique gouvernementale. Ce lieu de vérité, c’est bien entendu non pas la tête des économistes, mais le marché 5. » Mais Foucault anticipe de près de deux siècles. D’une part, la prévalence du droit est plus manifeste encore à l’époque classique qu’à âge préclassique ; les structures de marché s’approfondissent et s’appuient sur des contrats établis, le mot étant d’ailleurs repris dans la notion de contrat social qui naît à cette période. D’autre part, il n’y a pas pour les classiques une rupture dans la conception du marché. Les prix auraient été avant cette période, dit Foucault, des prix ordonnés selon des critères d’équité ou de stabilité sociale, des prix « justes » et non, comme postérieurement, des prix régis par la loi de l’offre et la demande. C’est ce que dément une bonne part de l’historiographie moderne, à partir d’auteurs comme de Roover ou Todeschini6, pour qui le juste prix n’était rien d’autre que le prix de marché, mais d’un marché mis en position de bien fonctionner, une idée qui fera apparaître progressivement le concept de concurrence, très net chez les auteurs de la seconde scolastique dans l’Espagne de la fin du xvie siècle, celui de monopole étant déjà ancien. La rupture, majeure, avec le mercantilisme existe, mais elle est que la société peut se libérer du prince, que l’économie peut fonctionner malgré sa dispersion, sans coordination venue d’en haut. La fameuse « main invisible », dans le seul passage de La Richesse des nations où Smith la mentionne, y est comme une image pour résoudre ce paradoxe d’une XXX économie qui évite le chaos alors que les centres de décision (de pouvoir) sont dispersés, chacun d’eux ne prenant nullement en compte la décision des autres. Il s’agit là d’une notion commune qui exprime la différence entre la cause finale d’une action et l’intention des agents7. Sur ce point, nos économistes restent même en retrait du libéralisme politique d’un Locke ou d’un Montesquieu pour qui la société fonctionne non pas malgré sa dispersion mais grâce à une dispersion des pouvoirs et des centres de décision, qui devient l’élément régulateur par lequel on atteint le bien commun. Dans ce contexte, le gouvernement prend une place très différente. La société connaît des contraintes et interactions multiples et l’art de gou‑ verner consiste à les prendre en compte. Il s’introduit une rationalité différente, une rationalité des fins, que Foucault décrit très bien. La question posée est celle de l’utilité ou de l’efficacité des effets induits d’une mesure. Mais ce qui est important Ce qui est important et moins et moins bien vu par Foucault est que bien vu par Foucault est que cette rationalité nouvelle peut justifier cette rationalité nouvelle peut autant l’intervention publique que son justifier autant l’intervention retrait. On pourra soutenir dans un cas publique que son retrait. que l’autonomie de la société signifie que le gouvernement est en trop, qu’il perturbe l’ordre économique ou qu’il interfère de façon coercitive sur la liberté individuelle. Mais on peut alternativement affirmer que le gouvernement a en main des guides et préceptes, une rationalité économique, qui l’autorisent et qui même le poussent à intervenir dans l’ordre économique. On voit poindre ici une bifurcation profonde, toujours actuelle, qui verra tout à la fois un Hayek libertarien ou un Keynes interventionniste se réclamer de la tradition économique libérale. À vrai dire, pour ce second courant libéral, on peut corriger la phrase de Foucault citée plus haut : autant que dans le marché, le lieu de vérité est dans la tête des économistes. Ils affichent déjà leur prétention en venant XXX · comme des ingénieurs sociaux, comme les Locke et Montesquieu l’ont été en matière d’institutions politiques, devisant le bon mécanisme ou le bon montage. On le voit déjà chez Quesnay, un physiocrate qui précède Smith, dans ses réflexions sur ce que doit être un « bon impôt », c’est‑à‑dire un impôt efficace, dans le sens de l’intérêt bien compris du royaume. Turgot le sera plus encore. Et au siècle suivant, des économistes comme Cournot ou Bertrand introduiront l’idée d’un calcul économique aux fins d’une utilité sociale maximale, et cela dans des domaines comme la décision de construire un pont, où le marché est absent et n’a rien à dire.XXX L’ordolibéralisme en Allemagne C’est un sujet d’étonnement, mal couvert par les historiens, que le libé‑ ralisme ait eu une place si réduite dans la riche tradition intellectuelle allemande, Kant faisant bien sûr une immense exception. Remontant hardiment dans le temps, l’une des explications peut tenir au luthéria‑ nisme dans sa version allemande, qui a été tout autant une école d’indi‑ vidualisme face au divin que de soumission face au pouvoir temporel, un terrain peu propice à l’élaboration d’un pacte collectif donnant sa légitimité au pouvoir, comme dans la tradition anglaise ou française. Un autre facteur déterminant tient au retard allemand à construire son État national. Il l’a fait tout du long du xviiie siècle (s’agissant de la Prusse) et du xixe siècle sous la houlette prussienne, avec un vif ressen‑ timent vis-à-vis des autres États européens déjà fortement constitués, et particulièrement de la Grande‑Bretagne qui imposait son libéralisme à coups de libre‑échange. Le romantisme, au début de ce siècle, en a été le pendant culturel, avec une forte dimension nationaliste, contredisant l’idéal libéral des Lumières. Le Zollverein (une union douanière entre États allemands mise sur pied dans les années 1830) exprimait bien le vœu des élites libérales à l’ouest de l’Allemagne, mais était dans la réalité un projet d’essence protectionniste actionné par la Prusse et théorisé par Friedrich List comme l’affirmation d’une souveraineté propre. Il a échoué en tant que projet politique. Au fond, l’Allemagne a connu son moment mercantiliste, mais avec un siècle et demi de retard. Ce sont les notions de richesse de l’État, de levées d’impôt, de contrôle de la monnaie, de commerce extérieurXXX devenu l’enjeu d’âpres batailles avec les pays voisins qui prévalaient. Un épisode intellectuel intéressant, qui allait préfigurer les tenants de l’libéralisme et les distinguer des libéraux tant classiques qu’états‑uniens, a été celui des « sciences camérales ». Il s’agissait d’écoles administratives mises en place par le roi de Prusse pour former le personnel capable d’assurer la puissance du souverain, non par des moyens militaires (cela allait venir plus tard), mais par une gestion réglée du pays, par voie de « police », selon le mot retenu à l’époque et commenté longuement par Foucault. Cette tradition s’est poursuivie à l’époque de Bismarck puis sous Weimar avec ce grand pré‑keynésien qu’a été Rathenau. Les penseurs de l’ordolibéralisme ont tout à la fois bousculé cette tradition et en ont subi l’influence. Les deux grands noms sont Wilhelm Röpke et Walter Eucken, suivis par Ludwig Erhard, futur chancelier, qui a donné au mouvement sa consistance politique. Ils ont bâti toute l’ossature idéologique du Parti chrétien‑démocrate allemand, sous le terme d’« éco‑ nomie sociale de marché », un terme que le SPD allait adopter lui aussi, soucieux, devant la popularité de la notion, de ne pas être durablement exclu du pouvoir. L’ordolibéralisme se caractérise d’abord par un rejet de l’intervention directe de l’État dans le jeu de l’économie : ni rôle stabilisateur, ni rôle redistributeur. Second principe, proche du premier, le gouvernant doit écouter ce que dit le système des prix, c’est‑à‑dire l’information qu’apporte le fonctionnement d’un marché concurrentiel. Mais il s’agit ici d’un choix presque autant forcé qu’idéologique. Tony Judt, dans son his‑ toire de l’après‑guerre8, signale cet épisode déterminant qu’a été le début de la guerre froide. Les États‑Unis ont imposé à la Grande‑Bretagne et à la France de se réarmer. Mais bien sûr pas à l’Allemagne. Or celle‑ci gardait largement intact son appareil industriel de guerre, qui s’est mis naturellement à tourner pour nourrir le reste des pays européens en produits venus de la mécanique ou de la chimie. Le modèle extraverti propre à l’Allemagne était lancé, une voie qu’ont trouvée plus tard le Japon et les autres pays asiatiques. S’appuyer sur la logique du marché international devenait alors l’élément clé d’une stratégie imposée par l’environnement autant que par la doctrine. Notons le contraste avec la XXX · France : trente ans après, au moment où Foucault faisait son cours, il y avait encore des prix administrés. Mais écouter le système des prix suppose que le marché fonctionne bien, qu’il repose sur un socle approprié : une fixité de la monnaie d’une part, et surtout une action délibérée de l’État pour imposer le principe de concurrence. Le marché n’est pas un ordre transcendant que toute initiative de l’État irait perturber ; il y a au contraire l’idée qu’il est fragile, qu’il y a une pente naturelle vers la formation de monopoles et de col‑ lusions, qu’il ne fonctionne pas naturellement sans un cadre très rigide que précisément l’État apporte9. Pour préserver la concurrence, il faut d’ailleurs encourager les entreprises familiales (le Mittelstand dont on sait aujourd’hui le succès économique), l’artisanat et une agriculture formée de petites exploitations. On n’est pas surpris alors du compromis trouvé entre la France et l’Allemagne au moment du traité de Rome : un pivot venu de Paris, à savoir la politique agricole commune qu’acceptaient de plus ou moins bon gré nos ordolibéraux, et, venue de Bonn, une solide autorité de la concurrence, avec un soutien plus mitigé de Paris. Ainsi, l’État intervient en amont, sur la structure plutôt que sur ses effets. Il pose la « règle », un mot toujours très fort pour les Allemands. La structure, ce sera davantage l’entreprise que le consommateur, ce sera davantage le droit que les dispositifs économiques et fiscaux. Par cohérence, l’ordolibéralisme avait une vue très restrictive de ce que devait être l’État social, bien loin du projet bismarckien. Cela en raison du primat donné aux prix et à l’entreprise. Une santé, une éducation et une culture socialisées ou gratuites, c’était intervenir à rebours puisqu’on niait l’apport du système de prix dans l’allocation des ressources. La protection sociale était pour eux l’affaire des individus. Si l’on devait aider, c’était uni‑ quement par le jeu des revenus, en préservant les mécanismes de marché. Cela n’a bien sûr pas résisté aux contraintes politiques du moment, sous l’influence notamment du SPD, de la tradition bismarckienne et des milieux catholiques, si l’on se rappelle l’influence qu’avait eue longuement le premier parti social‑chrétien d’Europe, le Zentrum, né en 1870. Mais, à elle seule, la concurrence ne saurait suffire. Röpke, cité par Foucault, le disait avec force : « Ne demandons pas à la concurrence plus qu’elle XXX ne peut donner. Elle est un principe d’ordre et de direction dans le domaine particulier de l’économie de marché et de la division du travail, mais non un principe sur lequel il serait possible d’ériger la société tout entière. Moralement et sociologiquement, elle est un principe dangereux, plutôt dissolvant qu’unifiant. Si la concurrence ne doit pas agir comme un explosif social ni dégénérer en même temps, elle présuppose un encadrement d’autant plus fort, en dehors de l’économie, un cadre politique et moral d’autant plus solide 10. » Foucault use de litote quand il interprète cette phrase comme une « ambiguïté » du libéralisme à l’allemande. On voit ici la différence avec l’autre versant, disons keynésien ou acti‑ viste, dans la bifurcation libérale mentionnée plus haut. Le camp activiste voyait le rôle de l’État en creux en quelque sorte, dans les défaillances du marché qu’il fallait compenser, n’hésitant pas à se substituer à lui s’il le fallait. L’ordolibéralisme insistait au contraire pour une action de l’État en amont, consistant à créer les conditions par lequel le marché continuerait à jouer pleinement son rôle, pour éviter les interventions en aval. Ce débat persiste pleinement aujourd’hui. Le libéralisme des écono‑ mistes américains, pour y venir, était plus extrême : c’est parce qu’il y a inévitablement des défaillances de l’État qu’il faut y substituer le marché.XXXL’École de Chicago Foucault ne traite que cursivement des représentants de l’école améri‑ caine du libéralisme économique, dont Frank Knight, Henry Simons, George Stigler et, plus tard, Milton Friedman. Ces économistes allaient transposer dans l’ordre social, en le poussant à l’extrême, une autre tradition économique libérale, née dans les années 1870, appelée néo‑ classique ou marginaliste. Dans un marché bien réglé, selon ce courant, les prix, le taux d’intérêt ou les salaires s’imposent de façon transcendante aux entreprises et aux ménages. Ceux‑ci sont immergés dans un monde dont les paramètres leur échappent. Ils reçoivent des informations externes et y répondent, méca‑ niquement, en ajustant leur comportement. La règle du profit maximum n’est qu’une règle de survie de l’entreprise. L’individu est représenté via un modèle très sommaire, l’homo œconomicus, égoïste et optimisateur, dont on ne trouve pas la moindre trace chez les pionniers du libéralisme 1XXX · économique, pas plus que chez les fondateurs de l’ordolibéralisme ou d’ailleurs chez Hayek. Le système des prix est comme le système nerveux, celui qui transmet les informations aux agents, qui les motive et les stimule. Chez ces libéraux américains, toute perturbation à son endroit est a priori néfaste. Par exemple, une organisation en syndicats ou un salaire minimum, parce qu’ils sortent du marché « libre », se retournent finalement contre les travailleurs (et les plus modestes, pour faire bonne mesure) en créant du chômage. On voit la différence avec Adam Smith, qui recommande que les travailleurs s’unissent dans la négociation sala‑ riale face à des patrons qui ont toute facilité, vu leur faible nombre, d’organiser la collusion entre eux11 ; de même qu’avec l’ordolibéralisme allemand qui, dès 1951, promulguait les premières lois d’après‑guerre sur la codétermination et les comités d’entreprise12. Les agents étant emmaillotés dans un tissu complexe d’incitations exo‑ gènes, leur autonomie est extraordinairement réduite. Foucault disait de l’âge classique que « le nouvel art gouvernemental consomme de la liberté ». Ici, il n’y a plus une once de liberté. L’individu est comme une molécule réa‑ gissant, selon des lois d’optimisation, aux impulsions externes fournies par le marché. L’économiste devient celui qui dit : « Incitations ! » La gouvernementalité par le marché est radicale et l’analyse de Foucault commence ici à prendre son sens : « L’ homo œconomicus, c’est celui qui est éminemment gouvernable. » Les règles de marché deviennent les étalons d’une bonne action publique ; elles en donnent les codes. Foucault introduit ici une distinction entre ce qu’il appelle le sujet de droit et le sujet d’intérêt : le sujet d’intérêt répond à des incitations venues de l’extérieur et renvoie rationnellement sa réponse ; le sujet de droit est mû par des motivations intrinsèques13. Par exemple, un interdit légal, assorti d’une sanction ou d’une peine, est un interdit pour le sujet de droit, mais un coût pour le sujet d’intérêt. Le délinquant chez Gary Becker, un économiste de Chicago, calculera les avantages et les coûts de son acte (dont l’amende ou la prison) et prendra sa décision en conséquence (et en cela n’est pas délinquant, ou alors nous le sommes tous).XXX 1XXX On retrouvera toutefois au sein de cette école américaine la bifurcation décrite plus haut entre libertariens et activistes. On n’abandonnera pas forcément l’ingénierie sociale chère à l’économiste, mais imbriquée dans l’ordre du marché : s’il y a, par exemple, une discrimination par l’argent dans l’accès à l’éducation, on distribuera des coupons pour permettre aux gens de tous les milieux de se présenter à l’école privée de leur choix, préservant ainsi la concurrence. Friedman recommandait le revenu uni‑ versel de base. Un courant intéressant a aussi émergé sous la désignation de market design, à savoir comment structurer un marché afin qu’il réponde à certains objectifs de politique économique ou sociale, un marché censé donc être asservi à la cause gouvernementale, à faire délibérément partie de sa panoplie d’instruments14. La relation État‑marché est à deux voies. Si d’ailleurs les individus sont soumis aux incitations et qu’un Léviathan apprend à bien les manier, tout lui devient possible. Un pas sera franchi quelque dix ans après le cours de Foucault : celui de la montée en régime d’un nouvel « espace de véridiction », le marché financier. Le voici qui, mieux que le marché des biens et du travail, pourra allouer les ressources au sein de l’économie et répartir le risque, avec des frictions minimales. C’est la valorisation en continu des actifs sur les marchés financiers qui est le juge de paix, y compris dans l’allocation de capital aux entreprises, y compris, prétend‑on, dans la gestion des entreprises. S’il faut caractériser en quelques mots ce qu’est le néolibéralisme dans le champ économique, on dira qu’il est l’addition du primat donné aux messages des prix, de la mise en retrait de l’État, de la plus grande fluidité donnée aux marchés financiers et de l’instrument-marché pour remédier aux défaillances que le marché peut entraîner et que l’action de l’État entraîne à coup sûr. On est très loin alors du libéralisme classique, très loin aussi de sa variante allemande d’après‑guerre, lesquels nous donnent, à n’en pas douter, de meilleures pistes pour affronter les défis de l’éco‑ nomie globale de demain.XXX 1XXX · Powered by TCPDF (www.tcpdf.org)"</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#On découpe en paragraphes</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>t<span class="ot">&lt;-</span> <span class="fu">str_split</span>(t, <span class="st">"XXX"</span>,<span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>t2<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(<span class="fu">t</span>(t))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Plus les textes sont standardisés et plus simple est le processus d’importation des pdf. Si l’on souhaite aller plus loin on recommande par exemple <a href="https://ropensci.org/blog/2018/12/14/pdftools-20/" class="uri">https://ropensci.org/blog/2018/12/14/pdftools-20/</a> pour extraire un tableau. ( à développer en 4 ou 5 lignes avec des références)</p>
</section>
<section id="la-numérisation-et-locr" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="la-numérisation-et-locr"><span class="header-section-number">3.1.2</span> La numérisation et l’OCR</h3>
<p>D’immenses archives sont numérisées, ce qui signifie qu’elles sont stockées sous forme d’image. L’information est contenu dans les pixels, et l’enjeu est d’y reconnaitre des formes caractéristiques : alphabet, ponctuation à travers de multiples variations. Les plus fortes sont celles manuscrites, mais l’écriture typographique est aussi très variables dans ses formes. C’est un enjeu industriel ancien. La reconnaissance optique des caractères a cependant fait d’immense progrès et atteint des niveaux de performance élevés.</p>
<p>Le traitement des adresses a sans doute été le problème principal qui a stimulé les technologies de l’OCR. La qualité du matériau est essentiel, et s’assurer que les expéditeurs choisissent un modèle conventiel et normé de rédaction de l’adresse est une condition de leur succcès. La situation idéale ressemble à ceci.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/adresse-postale.png" class="img-fluid figure-img"></p>
<figcaption>Modèle de rédaction correcte d’une adresse postale</figcaption>
</figure>
</div>
<p>La réalité ressemble souvent à celà</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/Posted_registered_letter_cover_Ukraine1998.jpg" class="img-fluid figure-img"></p>
<figcaption>à çà</figcaption>
</figure>
</div>
<p>Dans un environnement en science sociale la situation est moins complexe, les documents analysés ne seront le plus souvent pas des documents mansuscrits ( sauf pour les médiévistes), mais un scan de document plus structuré. Par exemple les jpg</p>
<p>Une solution pour R est <a href="https://cran.r-project.org/web/packages/tesseract/vignettes/intro.html">tesseract</a>. C’est un package qui permet d’accéder au programme du même nom, développé à l’origine chez Hewlett-Packard Laboratories entre 1985 et 1994, avec quelques modifications supplémentaires apportées en 1996 pour le portage sur Windows, et sur C en 1998. Tesseract a été mis en open Source par HP, en 2005, puis de 2006 à novembre 2018, a continué d’être développé par Google. Il s’appuie sur des réseaux neuronaux de type LSTM. C’est une petite, mais puissante intelligence artificielle qui supporte plus d’une centaine de langues.</p>
<p>Testons-le sans attendre avec le texte suivant. Extrait du premier article du premier numéro de la revue ” Etalages” Publiée en France de 1909 à 1938. L’image est un extrait du document numérisé fournit par la BNF.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/N1_avril1909b.jpeg" class="img-fluid figure-img"></p>
<figcaption>Lettre de motivation</figcaption>
</figure>
</div>
<p><a href="https://gabriben.github.io/NLP.html#introduction" class="uri">https://gabriben.github.io/NLP.html#introduction</a></p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tesseract)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tesseract_download</span>(<span class="st">"fra"</span>) <span class="co">#pour télécharger le modèle de langage</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C:\\Users\\33623\\AppData\\Local\\tesseract5\\tesseract5\\tessdata/fra.traineddata"</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>t1<span class="ot">&lt;-</span><span class="fu">Sys.time</span>()</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> tesseract<span class="sc">::</span><span class="fu">ocr</span>(<span class="st">"./data/N1_avril1909b.jpeg"</span>, <span class="at">engine =</span> <span class="st">"fra"</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>t2<span class="ot">&lt;-</span><span class="fu">Sys.time</span>()</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>t<span class="ot">&lt;-</span> t2<span class="sc">-</span>t1 <span class="co">#pour compter le temps de calcul</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(text) <span class="co">#pour afficher le texte avec sa mise en page</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>En fondant la ‘Revue Internationale de
l'Etalage, nous avons cédé à une ambition
qui. peut s'exprimer en trois mots : Faire
œuvre ulile.

Faire œuvre utile en facilitant la tâche du
commerçant détaillant par une documen-
tation sérieuse et raisonnée se rapportant aux
choses de sa profession, et notamment aux
meilleurs procédés pour attirer la clientèle.

Faire œuvre utile surtout en vulgarisant
pratiquement l’art appliqué à l'Etalage.

Si notre carrière de publiciste s'honore sans
fausse modestie d’avoir doté d’autres corpo-
rations de revues professionnelles qui rendent
des services, nous devons déclarer en toute
sincérité que la fondation d'aucune de celles- ;
ci ne répondait à un tel besoin.

Aussi est-ce d’un pied ferme que nous
nous engageons dans le vaste champ d’ac-
tions qui s'ouvre devant nous.

L'Etalage!.. Quel sujet intéressant et
captivant au premier chef. N’est-il pas vrai-
ment incompréhensible qu'aucuñe plume
autorisée n’ait jamais tenté, en France, d'en
établir les règles, d’en vulgariser les principes.
Et pourtant, en envisageant la chose à un
point de vue général, ne peut-on pas dire que
l'Etalage est un des ornements de nos cités
qui met sans cesse en évidence, aux yeux
de tous, la supériorité du goût et les apti-
tudes artistiques d’un pays ! Tandis qu’au
point dé vue de leurs propres intérêts, nos
lecteurs ne doivent-ils pas considérer l’Eta-
lage comme l'aimant qui attire les affaires !

On le comprend si bien aujourd’hui que le
commerçant qui se désintéresse de son éta-
lage est une exception appelée de plus en
plus à disparaître.

Et cependant, parmi ceux qui se rendent
un compte exact de l’importance du rôle de
VEtalage dans les affaires de détail, combien
peu possèdent à fond l’art de présenter leurs
produits sous leur meilleur jour et de la façon
la plus favorable. ‘

Quoi de surprenant d’ailleurs à cela. En</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#tesseract_info() #voir les langues disponibles</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>t</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 1.860249 secs</code></pre>
</div>
</div>
<p>Pour améliorer la performance qui peut se mesurer au niveau des lettres, mais doit surtout l’être au niveau des mots, deux stratégies sont possibles. La première de pre-processing, la seconde de post-processing avec un mécanisme de détection et de correction d’erreurs. Le pre-processing consiste à traiter l’image en renforçant les contrastes , en éliminant le bruit, on en rend les pixels mieux digestes pour tesseract. C’est ce à quoi s’attache le package magick qui offre un bouquet de fonctions à cette fin. Nous laissons le lecteur le tester seul.</p>
<p>Le post-processing sert à introduire des mécanismes de correction d’erreurs au niveau des mots. Pour une idée de ce type de développement voir <a href="https://gabriben.github.io/NLP.html">Gabriel, Yadir, Xiaojie, Mingyu</a></p>
<p>Naturellement, un paramètre important est la vitesse de traitement des images. Dans un projet complet on peut être amener à traiter des centaines images en boucle. Dans notre exemple la durée est de <code>t</code> secondes, autrement dit 6 images à la minute ou 360 à l’heure…</p>
</section>
<section id="du-speech-au-texte" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="du-speech-au-texte"><span class="header-section-number">3.1.3</span> Du speech au texte</h3>
<p>La tradition méthodologique de la sociologie est celle de l’entretien, avec toute sorte d’acteurs. Elle aboutit à la production de transcriptions, plus ou moins détaillées et précises. Mais des textes</p>
<p>On peut désormais enregistrer la paroles des interfaces vocales. Le speech to text est de plus en plus efficace, voir l’API de google. Il existe déja des packages sur R qui permettent d’accéder aux solutions de google langage qui nécessite une clé d’API.</p>
<p><a href="https://cran.r-project.org/web/packages/googleLanguageR/vignettes/setup.html" class="uri">https://cran.r-project.org/web/packages/googleLanguageR/vignettes/setup.html</a></p>
<p>une autre solution</p>
<p>On ne fait qu’entre-ouvrir le sujet, mais il est certainement un des futurs du NLP.</p>
</section>
</section>
<section id="lexploitation-de-base-de-données-textuelles" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="lexploitation-de-base-de-données-textuelles"><span class="header-section-number">3.2</span> L’exploitation de base de données textuelles</h2>
<p>Les bases de données textuelles sont désormais nombreuses , variées et normalisées. Elles permettent de constituer rapidement des corpus étoffés</p>
<section id="le-cas-europresse" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="le-cas-europresse"><span class="header-section-number">3.2.1</span> le cas Europresse</h3>
<p>On commence par un exemple simple en utilisant la base <a href="http://www.europresse.com/fr/">europresse</a>. L’objectif est de constituer un fichier de références bibliographiques, exploitable via R.</p>
<p>Dans Europresse , nous avons fait une recherche sur les articles comprenant le terme ” vaccination” dans la presse nationale françaises, constituées de 14 titres. On retient les 400 derniers articles du mois de Juillet 2021, le 12 le Président faisait une allocution.</p>
<p>On utilise <a href="https://revtools.net/data.html#importing-to-r">revtools</a> pour sa fonction d’importation des fichiers au format .ris et de transformation en data frame structuré</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(revtools)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_bibliography</span>(<span class="fu">iconv</span>(<span class="st">"./data/vaccination.ris"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">jour=</span><span class="fu">str_sub</span>(DA, <span class="dv">9</span>,<span class="dv">10</span>))</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">flextable</span>(<span class="fu">head</span>(df,<span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-c5a5eb4e{}.cl-c58dabba{font-family:'Arial';font-size:10pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c58dabce{font-family:'Arial';font-size:10pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c595a2b6{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:6pt;padding-top:6pt;padding-left:6pt;padding-right:6pt;line-height: 1;background-color:transparent;}.cl-c595f7ca{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c595f7de{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c595f7e8{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c595f7f2{width:0.75in;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-c5a5eb4e"><thead><tr style="overflow-wrap:break-word;"><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">label</span></p></th><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">type</span></p></th><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">title</span></p></th><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">author</span></p></th><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">journal</span></p></th><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">abstract</span></p></th><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">institution</span></p></th><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">year</span></p></th><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">pages</span></p></th><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">language</span></p></th><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">url</span></p></th><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">DA</span></p></th><th class="cl-c595f7ca"><p class="cl-c595a2b6"><span class="cl-c58dabba">jour</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">Paul.Ortoli_2021_LeMo</span></p></td><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">NEWS</span></p></td><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">La Corse redoute une gÃ©nÃ©ralisation de la reprise Ã©pidÃ©mique</span></p></td><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">Paul Ortoli</span></p></td><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">Le Monde</span></p></td><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">Alors que la Balagne, en Haute-Corse, a atteint vendredi 16 juillet un taux d'incidence de 1 066 cas pour 100 000 habitants, et un taux de positivit&lt;c3&gt;&lt;a9&gt; de 10 ...</span></p></td><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">Ajaccio correspondant</span></p></td><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">2021</span></p></td><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">9</span></p></td><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">FranÃ§ais</span></p></td><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">https://nouveau.europresse.com/Link/PARIS10T_1/news%c2%b720210720%c2%b7LM%c2%b74416628</span></p></td><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">2021/07/20/</span></p></td><td class="cl-c595f7de"><p class="cl-c595a2b6"><span class="cl-c58dabce">20</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce">X2021_LeMo</span></p></td><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce">NEWS</span></p></td><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce">EnquÃªte ouverte aprÃ¨s l'incendie d'un centre de vaccination</span></p></td><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce"></span></p></td><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce">Le Monde</span></p></td><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce">Le centre de vaccination contre le Covid-19 de la commune d'Urrugne, dans les Pyr&lt;c3&gt;&lt;a9&gt;n&lt;c3&gt;&lt;a9&gt;es-Atlantiques, d&lt;c3&gt;&lt;a9&gt;partement o&lt;c3&gt;&lt;b9&gt; le taux d'incidence est sup&lt;c3&gt;&lt;a9&gt;rieur au seuil d'alerte, a &lt;c3&gt;&lt;a9&gt;t&lt;c3&gt;&lt;a9&gt; ...</span></p></td><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce"></span></p></td><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce">2021</span></p></td><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce">12</span></p></td><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce">FranÃ§ais</span></p></td><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce">https://nouveau.europresse.com/Link/PARIS10T_1/news%c2%b720210720%c2%b7LM%c2%b75516067</span></p></td><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce">2021/07/20/</span></p></td><td class="cl-c595f7e8"><p class="cl-c595a2b6"><span class="cl-c58dabce">20</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">Catherine.Pacary_2021_LeMo</span></p></td><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">NEWS</span></p></td><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">EnquÃªte sur le record de vitesse des vaccins contre le Covid-19</span></p></td><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">Catherine Pacary</span></p></td><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">Le Monde</span></p></td><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">C'est un film qui tombe &lt;c3&gt;&lt;a0&gt; point. Alors que la vaccination se r&lt;c3&gt;&lt;a9&gt;v&lt;c3&gt;&lt;a8&gt;le indispensable pour lutter contre la pand&lt;c3&gt;&lt;a9&gt;mie de Covid-19, il r&lt;c3&gt;&lt;a9&gt;pond &lt;c3&gt;&lt;a0&gt; une interrogation r&lt;c3&gt;&lt;a9&gt;pandue : comment les ...</span></p></td><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">Documentaire</span></p></td><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">2021</span></p></td><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">TEL21</span></p></td><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">FranÃ§ais</span></p></td><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">https://nouveau.europresse.com/Link/PARIS10T_1/news%c2%b720210720%c2%b7LM%c2%b70377892</span></p></td><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">2021/07/20/</span></p></td><td class="cl-c595f7f2"><p class="cl-c595a2b6"><span class="cl-c58dabce">20</span></p></td></tr></tbody></table></div>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>g22<span class="ot">&lt;-</span><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>jour))<span class="sc">+</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()<span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span> <span class="st">"Jour du mois de Juillet 2021"</span>,<span class="at">y=</span><span class="cn">NULL</span>)<span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">6</span>, <span class="at">linetype=</span><span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>)<span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(journal))</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>g22</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="q03_corpus_suite_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="jouer-avec-les-bases-bibliographiques" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="jouer-avec-les-bases-bibliographiques"><span class="header-section-number">3.2.2</span> Jouer avec les bases bibliographiques</h3>
<p><code>Fulltext</code> doit être développé.</p>
<p><a href="https://books.ropensci.org/fulltext/data-sources.html" class="uri">https://books.ropensci.org/fulltext/data-sources.html</a></p>
<p>On propose un cas à partir de scopus ( demander à Olivier)</p>
</section>
</section>
<section id="lire-le-web-scrapping" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="lire-le-web-scrapping"><span class="header-section-number">3.3</span> Lire le web : Scrapping</h2>
<p>Le scrapping correspond à un internet sauvage où la collecte d’informations se traduit par une technique de chasseurs-cueilleurs, le glanage. C’est l’activité qui consiste à moissonner les informations disponibles sur le net en simulant et en automatisant la lecture par un navigateur (on préfère l’expression des québécois : des butineurs).</p>
<p>Elle consiste à construire un robot capable de lire et d’enregistrer les informations disponibles sous forme html puis à les distribuer (parsing) dans des tableaux structurés, selon une stratégie d’exploration du web préalablement définie. En réalité le scrapping pose deux problèmes :</p>
<ul>
<li><p>Celui de la structure de recherche. C’est le problème que relève les spiders, des robots qui recherchent dans les pages des liens, et vont de proche en proche, de lien en lien, pour explorer un domaine. Ils peuvent être plus systématiques et prendre davantage de l’organisation et structure d’un site web pour énumérer les pages.</p></li>
<li><p>Celui de la collecte de l’information sur chacune des pages. Il s’appuie sur le principe que le langage html est un langage à balise où le contenu et le contenant sont clairement séparés. Par exemple, dans le corps de texte d’une page on définira un titre par la balise</p>
<h1>
<p>dont l’instruction s’achève par la balise</p>
</h1>
<p>. On sépare ainsi clairement le contenu de la forme.</p></li>
</ul>
<p>`</p>

<h1>
Un titre de niveau 1 (un gros titre)
</h1>
<pre><code>&lt;p&gt;Un paragraphe.&lt;/p&gt;

&lt;h2&gt;Un titre de niveau 2 (un sous titre)&lt;/h2&gt;
  &lt;p&gt;Un paragraphe.&lt;/p&gt;

  &lt;h3&gt;Un titre de niveau 3 (un sous-sous titre)&lt;/h3&gt;
    &lt;p&gt;Etc.&lt;/p&gt;</code></pre>

<p>`</p>
<p>Ultérieurement on pourra définir les propriétés graphiques d’une balise par des CSS. Par exemple avec ceci, les paragraphes seront publiés en caractère bleu.</p>
<p><code>p{     color: blue; }</code></p>
<p>Ce qui nous intéresse n’est pas la décoration, mais le fait que les développeurs définissent des balises spécifiques pour chacun des éléments de leurs pages web, et que si nous savons les repérer , nous avons le moyen de mieux lire le texte. Les balises sont la cible du scrapping. Ces dernières peuvent néanmoins être protégées par les développeurs et encapsulées par d’autres langages informatique rendant leur butinage impossible. L’information n’est alors plus contenue dans la balise et le code source d’une page web.</p>
<p>De nombreuses ressources sont disponibles, mais pour en rester à R , le package rvest permet de réaliser des extractions simples mais suffisantes pour de nombreux usages.</p>
<p>Une application rvest :</p>
<p><a href="https://www.r-bloggers.com/2018/10/first-release-and-update-dates-of-r-packages-statistics/" class="uri">https://www.r-bloggers.com/2018/10/first-release-and-update-dates-of-r-packages-statistics/</a></p>
<p>Le package rvest est générique :</p>
<p><a href="https://community.rstudio.com/t/scraping-messages-in-forum-using-rvest/27846/2" class="uri">https://community.rstudio.com/t/scraping-messages-in-forum-using-rvest/27846/2</a></p>
<p>Voici un petit exemple sur du contenu d’un forum de VTC, un thread relatif à la question de la vaccination obligatoire.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape thread titles, thread links, authors and number of views</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="st">"https://uberzone.fr/threads/si-la-vaccination-devient-obligatoire-vous-feriez-vous-vacciner-ou-changeriez-vous-de-corps-de-metier.17425"</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"/page-2"</span>, <span class="st">"/page-3"</span>, <span class="st">"/page-4"</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (val <span class="cf">in</span> x){</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  url<span class="ot">&lt;-</span><span class="fu">paste0</span>(start,val)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  h <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>post <span class="ot">&lt;-</span> h <span class="sc">%&gt;%</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">".bbWrapper"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()<span class="sc">%&gt;%</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_replace_all</span>(<span class="at">pattern =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">|</span><span class="sc">\r</span><span class="st">|</span><span class="sc">\n</span><span class="st">"</span>, <span class="at">replacement =</span> <span class="st">""</span>)</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>post</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="co">#authors &lt;- h %&gt;%</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="co">#  html_nodes(".username--style2 ") %&gt;%</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="co">#  html_text() %&gt;%</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="co">#  str_replace_all(pattern = "\t|\r|\n", replacement = "")</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Create master dataset (and scrape messages in each thread in process)</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>master_data <span class="ot">&lt;-</span> </span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(post)</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>rds_name<span class="ot">&lt;-</span><span class="fu">paste0</span>(<span class="st">"./data/df_"</span>,<span class="fu">substr</span>(val,<span class="dv">2</span>,<span class="dv">6</span>),<span class="st">".rds"</span>)</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(master_data,rds_name)</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(master_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  post                                                                          
  &lt;chr&gt;                                                                         
1 "Je comprends pas pourquoi persistez-vous à vouloir convaincre alors que vous…
2 "Shibani a dit:Je comprends pas pourquoi persistez-vous à vouloir convaincre …
3 "*****\"Celui qui ne pète pas et ne rote pas explose\"*****"                  
4 "mez a dit:Ta cirrhose et ton  Cancer du poumon (je te les souhaite pas faut …
5 "Shibani a dit:Et puis sache que comme je l’ai déjà dit tu peux acheter ton p…
6 "*****\"Celui qui ne pète pas et ne rote pas explose\"*****"                  </code></pre>
</div>
</div>
<section id="des-problèmes-pratiques-juridiques-et-éthiques" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="des-problèmes-pratiques-juridiques-et-éthiques"><span class="header-section-number">3.3.1</span> Des problèmes pratiques, juridiques et éthiques</h3>
<p>La pratique du scrapping se heurte d’abord à une question technique. Ce n’est pas un excercice facile, et il doit être confier à des spécialistes. Il se heurte aussi à différents problèmes d’ordre éthique et juridique. Si la pratique n’est pas interdite en tant que telle, elle se confronte à différents droits et principes éthiques</p>
<p>En termes pratiques, le scrapping crée des risques pour les sites :</p>
<ul>
<li>Le risque de deny of service, c’est à dire de saturer ou de parasiter un système et de s’exposer à ses contre-mesures, comme par exemple, des protections.</li>
<li>Il contribue à la complexification du web, et implique une consommation excessive de ressources énergétiques.</li>
</ul>
<p>Et des risques pour la qualité du recueil de données</p>
<ul>
<li>Le risque d’information parcellaires, tronquées, inexactes qui résultent de ces contre-mesures. Les producteurs développent des stratégies moins naives. L’exemple des pages numérotée par ordre de production auxquels on substitue un nombre au hasard pour annihilier l’information temporelle.</li>
<li>Le risque matériel de mal lire les informations, pour des raisons d’encodage approximatifs.</li>
</ul>
<p>En termes de droits même les conditions légales relèvent de différents droits :</p>
<ul>
<li>De la propriété intellectuelle,</li>
<li>Du respect de la vie privée,</li>
<li>Du droit de la concurrence qui sans l’interdire, condamne la copie laissant espérer qu’une transformation des données fasse qu’il y échappe.</li>
</ul>
<p>Cependant des facilités et tolérances sont souvent accordées quand c’est dans un objectif de recherche et que des précautions minimales d’anonymisation ou de pseudonymisation sont prises, que les règles de conservation et de destruction des données sont précisées.</p>
<p>En termes éthiques</p>
<ul>
<li>Un principe éthique essentiel dans la recherche, et ailleurs, et de ne pas nuire à la société dans son ensemble, hors cette technique participe à la “robotisation” du web (plus de 50% du trafic résulterait de la circulation des spiders , scrapers, sniffers et autres bots, comme dans la forêt une éthique écologique revient à préveler le minimal nécessaire pour l’étude entreprise</li>
</ul>
</section>
</section>
<section id="limportance-croissante-des-api" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="limportance-croissante-des-api"><span class="header-section-number">3.4</span> L’importance croissante des API</h2>
<p>Les API doivent être considérées comme la voie normale d’accès à l’information, du moins en droit. Elles relèvent du contrat. Le recours aux APIs est civilisé, ne serait-ce parce qu’on introduit une sorte d’étiquette, des règles de courtoisie, un système de reconnaissance réciproque et d’attribution de droits.</p>
<p>Sur le plan méthodologique elles présentent l’avantage de donner aux requêtes un caractère reproductible , mêmes si les bases visées peuvent varier. Elles asurent une grande fiabilité des données.</p>
<p>L’utilisation d’API lève l’ambiguïté légale qui accompagne le scraping et peut ainsi paraître comme plus “civilisée”. Elle nécessite naturellement que le gestionnaire de la base de données fournisse les moyens de s’identifier et de requêter, elle peut avoir l’inconvénient d’être coûteuse quand l’accès est payant, ce qui sera de plus en plus le cas.</p>
<section id="un-tour-dhorizon" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="un-tour-dhorizon"><span class="header-section-number">3.4.1</span> Un tour d’horizon</h3>
<p>La plus part des grandes plateformes offrent des API plus ou moins ouvertes, examinons-en quelques une pour comprendre plus clairement leur intérêt méthodologique. On va se concentrer sur trois exemples : le firehose de tweeter, l’API de google maps, la Crunchbase.</p>
<p>Twitter n’est pas qu’un réseau social, c’est une gigantesque base de données qui enregistre les engagements et les humeurs de 500 millions d’humains à travers la planète et les centres d’intérêts. Elle permet potentiellement de saisir les opinions à différentes échelles géographiques et temporelles, y compris les plus locales et les plus courtes. Elle a le défaut de souffrir fortement de biais de sélection, le premier étant le biais d’engagement. Les passionnés d’un sujet parlent plus que les autres, d’une parole mieux contrôlée.</p>
<p>Le cas de Google maps est passionnant à plus d’un égard. le premier d’entre eux est que dans l’effort d’indicer chaque objet de la planête, la base de données devient un référentiel universel, plus qu’une représentation intéressée du monde. Quand l’utilisateur commun cherche un chemin optimal, l’analyste de données y trouve un socle pour ordonner le monde.</p>
<p>La Crunchbase construite par le média Techcrunch repertorie les créations de start-up et les levées de fonds qu’elles ont obtenues. Elle recense les dirigeants, les acquisitions, décrit les business model.</p>
<p>intégrité des bases de données, universalité des élément, interopérabilité, disponibilité</p>
<p>Les problèmes posés :</p>
<ul>
<li>Justesse , précision et représentativité. Leur constitution n’est pas aléatoire, leurs couvertures restent partielle.</li>
<li>Accessibilité, la privatisation du commun. Si pour le chercheur les APIs sont sur un plan de principe une merveille, elles instaurent sur un plan plus social des inégalités d’accès énormes aux données qui permettent de valoriser la connaissance. Ce mécanisme opère via deux canaux. Le premier est celui de la tarification; qui ségrège les chercheurs en fonction des ressources dont ils disposent. Le second passe par la couverture du champ, les données les plus précises et les plus denses se trouvent dans les régions les plus riches.</li>
<li>Des catégorisations peu délibérées</li>
</ul>
</section>
<section id="un-point-de-vue-plus-technique" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="un-point-de-vue-plus-technique"><span class="header-section-number">3.4.2</span> un point de vue plus technique</h3>
<p><a href="https://www.dataquest.io/blog/r-api-tutorial/" class="uri">https://www.dataquest.io/blog/r-api-tutorial/</a></p>
</section>
<section id="un-exemple-avec-rtweet" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="un-exemple-avec-rtweet"><span class="header-section-number">3.4.3</span> Un exemple avec Rtweet</h3>
<p>Les changement de règles de twitter rende l’exemple obsolète, on le garde pour mémoire.</p>
<p><a href="https://cran.r-project.org/web/packages/rtweet/vignettes/intro.html" class="uri">https://cran.r-project.org/web/packages/rtweet/vignettes/intro.html</a></p>
<p>Plusieurs packages de R permettent d’interroger le firehose ( la bouche d’incendie!) de twitter.</p>
<p><a href="https://www.rdocumentation.org/packages/rtweet/versions/0.7.0" class="uri">https://www.rdocumentation.org/packages/rtweet/versions/0.7.0</a></p>
<p>L’authentification ne nécessite pas de clé d’API, il suffit d’avoir son compte Twitter ouvert. Cependant la fonction lookup_coords requiert d’avoir une clé d’API ou google cloud map. Elle permet de sélectionner et conditionner l’extraction sur un critère géographique.</p>
<p><a href="https://developer.twitter.com/en/docs/tutorials/getting-started-with-r-and-v2-of-the-twitter-api" class="uri">https://developer.twitter.com/en/docs/tutorials/getting-started-with-r-and-v2-of-the-twitter-api</a></p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#une boucle pour multiplier les hashtag </span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">#x&lt;-c("#getaround","#Uber", "#heetch")</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">#for (val in x) {</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  tweets &lt;- search_tweets(val,n=20000,retryonratelimit = TRUE)%&gt;% #geocode = lookup_coords("france")</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">#      mutate(search=val)</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  write_rds(tweets,paste0("tweets_",substring(val,2),".rds"))</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co">#}</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="co">#df_blablacar&lt;-readRDS("./data/tweets_blablacar.rds")</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co">#df_uber&lt;-readRDS("./data/tweets_uber.rds")</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co">#df_heetch&lt;-readRDS("./data/tweets_heetch.rds")</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="co">#df&lt;-rbind(df_blablacar,df_uber )</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="co">#ls(df_blablacar)</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="co">#foo&lt;-df %&gt;% select(account_lang, geo_coords,country_code, country, account_lang,place_name)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>On laisse le lecteur explorer les différentes fonctionnalités du package. On aime cependant celle-ci qui échantillonne le flux courant au taux annoncé de 1%. Voici l’extraction de ce qui se dit en France pendant 10 mn (600s). La procédure peut s’apparenter à une sorte de benchmark auquel on peut comparer une recherche plus spécifique.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#rt &lt;- stream_tweets(lookup_coords("france"), timeout = 600)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="un-autre-exemple" class="level3" data-number="3.4.4">
<h3 data-number="3.4.4" class="anchored" data-anchor-id="un-autre-exemple"><span class="header-section-number">3.4.4</span> Un autre exemple</h3>
<p>google map serait bien mais leur API fermée, il en faut une ouverte. discogs .?</p>
</section>
</section>
<section id="conclusion" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">3.5</span> Conclusion</h2>
<p>Dans ce chapitre nous aurons égratigné des sujets techniques de constitution de corpus en envisageant différents moyens d’accès</p>
<p>On soulignera la technicité croissante et spécifique de chacun ces moyens de collecte.</p>
<p>On observera l’étendue des domaines à exploiter.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./q02_corpus.html" class="pagination-link" aria-label="La notion de corpus">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">La notion de corpus</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./q04_explorer.html" class="pagination-link" aria-label="Explorer le corpus">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Explorer le corpus</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>